# CPU의 작동 원리
## 4-1 ALU와 제어장치
### ALU
![ALU](/resources/Computer%20Science/Computer%20Architecture/ALU.png)

#### 받아들이는 정보
  - 피연산자 <- 레지스터
  - 제어신호 <- 제어장치
#### 내보내는 정보
  - 결과값 -> 레지스터 -> 메모리 (바로 메모리로 보내면 느려짐)
  - 플래그 -> 플래그 레지스터
    -  연산결과에 대한 추가적인 상태 정보
    >![flag](/resources/Computer%20Science/Computer%20Architecture/flag.png)


### 제어장치
> 제어신호를 내보내고, 명령어를 해석하는 부품
![control](/resources/Computer%20Science/Computer%20Architecture/control.png)

#### 받아들이는 정보
1. 클럭신호 : 컴퓨터를 움직이게 하는 시간단위(클럭 박자에 맞춰 작동하는 것이지 한 박자마다 작동 X)
2. 해석해야할 명령어
   - 명령어 레지스터로부터
3. 플래그 레지스터의 플래그 값
4. 시스템버스 중 제어 버스로 전달된 제어 신호
  
#### 내보내는 정보
1. CPU 외부에 전달하는 제어신호 = 제어버스로 제어 신호 내보낸다
   1. 메모리에 전달
   2. 입출력장치에 전달
2. CPU 내부에 전달하는 제어 신호
   1. ALU 에 전달 - 수행할 연산 지시
   2. 레지스터에 전달 - 레지스터간 데이터 이동, 저장된 명령어 해석


## 4-2 레지스터
> 레지스터 속 값을 관찰하면, 프로그램 실행시 CPU 내부에서 무슨 일이 생기는지 알 수 있음

### 프로그램 카운터
> 메모리에서 읽어 들일 명령어의 주소를 저장한다
> = 명령어 포인터

### 명령어 레지스터
> 방금 메모리에서 읽어 들인 명령어를 저장하는 레지스터

### 메모지 주소 레지스터
> 메모리의 주소를 저장하는 레지스터<br>
> CPU가 읽어 들이고자 하는 주소 값을 주소 버스로 보낼 때 메모리 주소 레지스터를 거침

### 메모리 버퍼(데이터) 레지스터
> 메모리와 주고받을 값(데이터,명령어)을 저장하는 레지스터

### 범용 레지스터
> 다양하고 일반적인 상황에서 자유롭게 사용할 수 있는 레지스터, 데이터와 주소 모두 저장 가능

### 플래그 레지스터
> 연산 결과 또는 CPU 상태에 대한 부가적인 정보 장

### 스택 포인터
> 스택 주소 지정 방식이라는 주소 지정에 사용될 수 있는 특별한 레지스터

> 스택의 꼭대기를 가리키는 레지스터, 스택의 마지막으로 저장한 값의 위치를 저장하는 레지스터



### 베이스 레지스터
> 프로그램 카운터와 같이 변위 주소 지정 방식이라는 주소 지정에 사용되는 레지스터

- 특정 레지스터를 이용한 주소 지정 방식

### 스택 주소 지정 방식
- 스택과 스택 포인터를 이용

- 스택 포인터가 스택의 데이터가 어디까지 채워졌는지를 위치값을 알고 있는 것을 이용

- 스택
  - 메모리 안에 존재하며 스택 영역이 따로 정해져 있음

### 변위 주소 지정 방식
> 오퍼랜드 필드의 값(변위)과 특정 레지스터의 값을 더하여 유효 주소를 얻어내는 주소 지정 방식

```t
# 변위 주소 지정 방식 명령어의 구조
명령어 = 연산코드 + 레지스터 + 오퍼랜드
```

- 어떤 레지스터를 더하는지에 따라 상대 주소 지정방식, 베이스 레지스터 주소 지정 방식으로 나뉨

#### 상대 주소 지정 방식
> 오퍼랜드 + 프로그램 카운터 => 유효주소

- 모든 코드 실해잉 하닌, 분기하여 특정 주소 코드 실행시 사용
#### 베이스 레지스터 주소 지정 방식
> 오퍼랜드 + 베이스 레지스터 => 유효주소

```txt
베이스 = 기준주소
오퍼랜드 = 기준 주소로부터 떨어진 거리
```
## 4-3 명령어 사이클과 인터럽트
